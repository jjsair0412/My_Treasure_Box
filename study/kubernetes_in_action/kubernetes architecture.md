# kubernetes architecture
## ETCD
Kubernetes의 모든 메타데이터 및 클러스터 상태를 일관되게 유지시키기 위해, Key - value 형태의 저장소가 필요한데,. 그것이 ETCD 입니다.
- 저장되는 유일한 장소가 ETCD 이기 때문에, ETCD를 잘 관리해야 합니다.

Kubernetes API 서버만이 ETCD에 접근이 가능하며 , 다른 구성 요소는 ETCD에 접근하기 위해 API 서버를 거쳐야 합니다.

### ETCD의 고 가용성 보장
ETCD 내부에 Kubernetes 모든 리소스 메타데이터 및 클러스터 상태가 저장되기에, 고가용성을 보장하기 위해 2대 이상의 ETCD 인스턴스를 실행합니다.

여러 ETCD 인스턴스가 존재한다 했을 때 , 각 인스턴스들은 서로 일관적이게 데이터가 유지되어야만 합니다.

따라서 ETCD 는 ***RAFT 합의 알고리즘*** 을 사용하여 어느 순간이던간에 각 노드 상태가 대다수 노드가 동의하는 상태이거나, 이전에 동의된 상태를 나타냅니다.

    RAFT 합의 알고리즘은 , 모든 ETCD 인스턴스들이 이전 상태에서 새로운 상태로 전환하기 위해 과반수가 찬성해야하는 알고리즘 입니다.

RAFT 합의 알고리즘을 사용하는 ETCD는 , ***과반수*** 라는 조건을 갖고있기 때문에 , 인스턴스 개수는 홀수로 유지시키는것이 에러 발생률을 낮출 수 있으며 , 대규모 ETCD 클러스터라 하더라도 5대 혹은 7대면 충분합니다.

## Kube API Server
클러스터 상태를 조회 및 변경하기 위해서, RESTful API로 CRUD 인터페이스를 제공하고, 상태를 ETCD에 저장하는 요소

