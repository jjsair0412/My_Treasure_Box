# AWS S3 Presigned URL
Amazon s3에 저장된 데이터를 업로드하거나 다운로드 하려면 , 해당 s3 endpoint로 접근해야 합니다.

이때 , 관리자가 미리 권한부여를 해준 endpoint를 사용자 (client) 에게 전달해주는 기능이 S3 Presigined URL 입니다.

## ***S3 파일 공유 방안들***
## 1. 기존 S3
기존의 S3는 모든 파일을 public으로 두고 , 모든 사용자가 다 접근해서 다운로드할 수 있게끔 합니다.
- 별도의 관리가 필요없지만 , 아무나 파일을 다운로드할 수 있다는 단점이 있습니다.

## 2. IAM 자격증명 공유 방안 (Access Key Pair)
엑세스 키 페어 (Access Key, Secret Access Key)를 사용자에게 공유해서 , 키를 갖고있는 사람만 다운로드할 수 있게끔하는 방안
- 지정한 사람만 공유받을 수 있다는 장점이 있지만 , 키페이 관리가 어렵고 자격증명 유출이나 변경됫을 경우 , 사용자 모두에게 다시 발급해줘야하는 번거로움이 있습니다.
- 관리혼란이 가중될 수 있습니다.

## 3. IAM 사용자 부여하기
IAM 사용자를 발급해서 , IAM 사용자들만 S3에 접근할 수 있도록 하는방법 입니다.
- 지정한 사람만 공유받을 수 있다는 장점이 있지만 , 유지보수가 어렵고 모든 유저에게 IAM을 부여해야하며 , IAM 사용자는 5000개의 사용자 숫자제한이 있기에 퍼블릭한 서비스에 도입하기엔 안맞습니다.
- 유저가 가입하거나 탈퇴할 수 있기에 굉장히번거롭습니다.

## 4. Presigned URL - 미리 서명된 URL
S3에 미리 서명된 URL을 공유하는 방법입니다.

관리자가 , S3 파일에 대한 권한을 담아서 S3 endpoint URL을 생성 (미리 서명된 URL 생성) 해서 해당 S3 URL을 공유하는것 입니다.

생성자가 가진 권한으로 파일에 접근 가능한 임시 URL을 생성합니다.
- 지정한 사람만 공유받을 수 있습니다.
    - 해당 권한이 부여된 URL에 접근해야만 S3 파일에 접근할 수 있습니다.
- 해당 URL에 만료 기간을 부여할 수 있습니다.
    - 만료기간이 넘어가면 URL 이 무효화 됩니다.
    - 보안강화
- 권한관리가 가능합니다.
    - URL 기반으로 권한을 관리하기 때문에 , 관리자가 권한을 회수하거나 부여하는것이 용이합니다.
- HTTP 기반 접근 가능
    - 웹 및 타 app에서도 쉽게 구현이 가능합니다.

HTTP 메서드 (GET , POST) 를 사용할 수 있습니다.
- 다운로드 및 업로드 모두 미리 서명된 URL을 사용할 수 있습니다.

# Presigned URL 사용 방안
aws cli 명령어로 Presigned URL을 생성할 수 있습니다.

aws API (sdk) 를 통해 Presigned URL을 생성할 수 있습니다.