# AWS Lambda
## Serverless 란 ?
IDC -> IaaS/PaaS -> Container -> serverless

- 서버 관리와 프로비저닝 없이 코드를 실행할 수 있는 환경을 서버리스라 함
- 사용한 만큼만 비용을 지불함 (OnDemand)
- 고 가용성 및 장애 내구성이 확보되어 있다.
    - EC2는 고가용성을 확보하기위해 LB등 타 서비스가 필요한데 , Lambda는 되어있음.
- 빠른배포와 업데이트 가능
    - 관리 및 프로비저닝이 필요없기 때문
- 서버리스를 잘 이용할 수 있는 아키텍쳐가 필요
    - 병렬처리 고려
    - 이벤트 기반 아키텍처 필요.


## Lambda
AWS 공식 홈페이지에선 람다를 다음과 같은 정의로 설명하고 있습니다.
>AWS Lambda는 서버를 프로비저닝 또는 관리하지 않고도 실제로 모든 유형의 애플리케이션 또는 백엔드 서비스에 대한 코드를 실행할 수 있는 이벤트 중심의 서버리스 컴퓨팅 서비스입니다. 200개가 넘는 AWS 서비스와 서비스형 소프트웨어(SaaS) 애플리케이션에서 Lambda를 트리거할 수 있으면 사용한 만큼만 지불하면 됩니다.

### 그래서 람다는 .. ?
AWS의 서버리스 컴퓨팅 서비스 입니다.
- 코드를 실행하기 위한 파일을 업로드하기만 하면 , 서버를 프로비저닝할 필요 없이 코드를 실행시킬 수 있습니다.

다양한 AWS 서비스에서 람다를 트리거 (호출) 할 수 있으며 , 람다 수행 이후 결과값을 통해 다른 AWS 서비스를 호출할 수도 있습니다.

다양한 언어를 지원합니다.
- Java, Go, PowerShell, Node.js, C#, Python 및 Ruby 코드를 지원하며, 그 밖에 프로그래밍 언어를 사용해 함수를 작성할 수 있도록 Runtime API도 제공합니다.

저렴합니다.
- 처음 100만건 호출은 무료이며 , 이후 100만건당 0.2$만 내면 됩니다.
    - 이건 근데 메모리 사용량이나 컴퓨팅 사용량에 따라 차이가나긴 함..

또한 Amazon ECR에 올라간 이미지를 Lambda에서 실행할 수 도 있습니다.!

## Lambda 구성
### Deployment Package
함수의 코드 및 코드를 실행하기 위한 런타임으로 구성되어 있습니다.
- 용량 제한이 있는데. 다음과 같습니다.
    - zip : 50mb
    - unzip : 250mb
    - 콘솔 에디터 사용시 : 3mb

또한 Amazon의 object storage인 s3에 업로드하는것이 가능합니다.

ECR에 올라간 이미지 및 Lambda layer 등으로 용량 제한을 우회할 수 도 있습니다.

### 일반적 구성
iam 역할이 있어야 합니다.
- 다른 AWS 서비스들과 연겯되어 수행하기 때문

메모리 제한이 있습니다.
- 128~10,240MB (약 10GB)
- 메모리 사용량에 따라 가격이 조금씩 달라집니다.

제한 시간이 존재합니다.
- 최대 15분입니다.
- 람다는 기본적으로 잘게 쪼게진 작은 단위로 수행하는 로직들을 위한 서비스 입니다.

/tmp 디렉토리 스토리지 사용가능
- AWS의 임시 저장공간인 /tmp 를 사용할 수 있기 때문에 , 거기에 코드수행시 필요 로직을 저장할 수 도 있습니다.
- EFS 와 같은 스토리지 서비스랑도 연결할 수 있습니다.


### 트리거 (Trigger)
람다를 호출하는 AWS의 다른 서비스를 의미합니다.
- api gateway
- sqs
- s3

등 수많은 서비스가 트리거로 동작할 수 있습니다.

### ETC
권한 부여 (Permissions)
- IAM 역할로 부여된 AWS 서비스들을 사용할 수 있는 권한을 부여할 수 있습니다.

태그
- Lambda 함수에 태그를 붙여서 식별이 용이하게끔 할 수 있습니다.

환경 변수 세팅이 가능합니다.
- Lambda 함수에서 사용할 환경 변수 세팅이 가능합니다.