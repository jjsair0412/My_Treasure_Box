# Jenkins Pipeline 방식 비교 : 선언적 파이프라인 VS 스크립트형 파이프라인
## 0. Overview
Jenkins Pipeline은 선언적 방식과 스크립트형 방식으로 나뉨

이 둘의 차이점과 장단점을 기반으로 어떠한 상황에서 사용하면 좋을 지 설명

## 1. 코드상 차이점
각 파이프라인 별 구문 차이가 있음.

- 선언적 파이프라인(Declarative Pipeline)
```
pipeline {
    agent any
    stages {
        stage('Build') { steps { ... } }
        stage('Test') { steps { ... } }
        stage('Deploy') { steps { ... } }
    }
}
```

- 스크립트 파이프라인(Scripted Pipeline)
```
podTemplate(...) {
    node('test') {
        def environments = ['dev', 'staging', 'prod']
        for (env in environments) {
            stage("Test in ${env}") {
                // 환경별 맞춤형 테스트 로직
            }
        }
    }
}
```

## 차이점

### 2.0 실무적
***파이프라인 정의 방식:***
- 선언적: ```pipeline { stages { stage('Name') { steps { ... } } } }```
- 스크립트: ```podTemplate { node { stage('Name') { ... } } }```

***변수 사용:***
- 선언적: 변수 선언이 제한적이며 ```environment``` 블록에서 주로 정의
- 스크립트: 자유로운 변수 선언과 사용 가능

***조건부 실행:***
- 선언적: ```when { expression { ... } }``` 구문으로 제한됨
- 스크립트: ```if```, ```switch```, 삼항 연산자 등 모든 Groovy 조건문 사용 가능

***에러 처리:***
- 선언적: ```post``` 블록(success, failure, always)으로 제한됨
- 스크립트: ```try-catch-finally```로 세밀한 예외 처리 가능


***병렬 처리:***
- 선언적: ```parallel``` 또는 ```stages``` 내에서 ```parallel``` 사용
- 스크립트: 더 유연한 병렬 처리 로직 구현 가능

### 2.1 이론적 차이점
### 2.1.1 선언적 파이프라인
최신화된 방식이며, 가독성이 높고 유지 보수성이 좋은 방식임.

### 장점
**1. 우수한 가독성**
- 명확한 구조와 흐름을 가지고 있어, 파이프라인 흐름 이해가 쉬움

**2. 유지보수성**
- 일관된 구조로 다른 사람들이 이해하기 쉬움

**3. 내장 기능**
- when, post 등 유용한 기능이 기본 제공됨

4. 문법 검증
- 실행 전 구문오류 검증 가능

### 단점
**1. 유연성 제한**
- 복잡한 로직 구현에 제약이 있음.

**2. Groovy 기능 활용 제한**
- 일부 고급 프로그래밍(for문 등) 사용이 제한됨

**3. 커스터마이징의 한계**
- 형식을 강제하기 때문에, 워크플로우 작성에 제약이 있음.

### 사용 사례
쉬운 방식으로 초기 도입 시 사용함.
- 표준화된 파이프라인이 필요할 경우
- 단순화고 명확한 빌드 프로세스가 필요한 경우
- 새로운 Jenkins 사용자나 팀이 파이프라인을 도입할 경우

### 2.1.2 스크립트 파이프라인(Scripted Pipeline - podTemplate/node)
복잡한 로직이나 조건부 실행이 필요할 경우 유용한 방식

### 장점
**1. 높은 유연성**
- Groovy 스크립트의 모든 기능 활용 가능

**2. 복잡한 로직 구현**
- 조건, 반복, 예외 처리 등 고급 프로그래밍이 가능함.

**3. 기존 코드 재사용**
- 함수와 클래스를 활용한 코드 재사용성 증가

### 단점
**1. 높은 러닝커브**
- Groovy 언어를 이해해야 하며, Jenkins 파이프라인 API에 대한 이해가 필요함.

**2. 가독성 저하**
- 복잡한 로직은 가독성을 저하시켜 이해가 힘들어 질 수 있음.

**3. 유지보수의 어려움**
- 스크립트문이 복잡해지기 때문에 디버깅과 수정이 어려울 수 있음.

### 사용 사례
복잡하고 동적인 워크플로우가 필요한 경우 사용
- 특정 조건에 따라 다른 빌드 단계가 필요할 때
- 기존 Groovy 스크립트와 통합이 필요할 때
- 특정 프로젝트에 맞춤형 로직이 필요할 때
